<hr>

<h2 id="titlesignaturedecoder" class="anchor"><a class="heading-anchor" href="#titlesignaturedecoder"><span></span></a>title: Signature Decoder</h2>

<p><b>
The Signature Decoder is used to enable or disable the Signature decoder.
</b></p>

<h2 id="syntax" class="anchor"><a class="heading-anchor" href="#syntax"><span></span></a>Syntax</h2>

<table class="re-table"><tbody><tr><th class="tableHeading">signature (Decoder) &lt;META&gt; Syntax
</th></tr><tr><td class="clsSyntaxCells clsOddRow"><p>&lt;META HTTP-Equiv="scanner" content="Signature:[parameter]"&gt;</p></td></tr></tbody></table>

<table class="re-table"><tbody><tr><th class="tableHeading">signature JavaScript Object Syntax:</th></tr><tr><td class="clsSyntaxCells clsOddRow">
By default the JavaScript Object <b>'scanner'</b> will exist on the current page and can be used to interact directly with the signature.
</td></tr><tr><td class="clsSyntaxCells clsEvenRow">
To Set signature parameters via JavaScript use the following syntax: scanner.Parameter = Value;
<p>e.g. <b>scanner</b>.signature = Value;
</p></td></tr></tbody></table>

<table class="re-table"><tbody><tr><th class="tableHeading">Signature Ruby Object Syntax:</th></tr><tr><td class="clsSyntaxCells clsOddRow">
By default the Ruby Object <b>'Scanner'</b> will exist on the current page and can be used to interact directly with the Signature.
</td></tr><tr><td class="clsSyntaxCells clsEvenRow">
To Set Signature parameters via Ruby use the following syntax: Scanner.Parameter = Value
<p>e.g. <b>Scanner</b>.signature = Value
</p></td></tr></tbody></table>

<h2 id="parameters" class="anchor"><a class="heading-anchor" href="#parameters"><span></span></a>Parameters</h2>

<p>Items listed in this section indicate parameters, or attributes which can be set.</p>

<table class="re-table"><colgroup><col width="20%"><col width="20%"><col width="38%"><col width="22%"></colgroup><tbody><tr><th class="tableHeading">Name</th><th class="tableHeading">Possible Values</th><th class="tableHeading">Description</th><th class="tableHeading">Default Value</th></tr><tr><td class="clsSyntaxCells clsOddRow"><b>signature:[Value]
</b></td><td class="clsSyntaxCells clsOddRow">enabled / Disabled</td><td class="clsSyntaxCells clsOddRow">Enables / Disables the Signature decoder.  The barcode will be returned as a Data URI object with a jpeg mime type, you should specify the barcodeDataFormat and dataBufferSize parameters accordingly.</td><td class="clsSyntaxCells clsOddRow">Device specific</td></tr></tbody></table>

<table class="re-table"><colgroup><col width="78%"><col width="8%"><col width="1%"><col width="5%"><col width="1%"><col width="5%"><col width="2%"></colgroup></table>

<h2 id="requirements" class="anchor"><a class="heading-anchor" href="#requirements"><span></span></a>Requirements</h2>

<table class="re-table"><tbody><tr><th class="tableHeading">RhoElements Version</th><td class="clsSyntaxCell clsEvenRow">2.1 or above
</td></tr><tr><th class="tableHeading">Supported Devices</th><td class="clsSyntaxCell clsOddRow">All supported devices except: Android.</td></tr><tr><th class="tableHeading">Minimum Requirements</th><td class="clsSyntaxCell clsOddRow">Scanner and device that supports the Signature decoder.</td></tr><tr><th class="tableHeading">Persistence</th><td class="clsSyntaxCell clsEvenRow">Transient - Decoder settings are only guaranteed to persist until the Scanner is disabled</td></tr></tbody></table>

<h2 id="htmljavascriptexamples" class="anchor"><a class="heading-anchor" href="#htmljavascriptexamples"><span></span></a>HTML/Javascript Examples</h2>

<p>The following example enables the scanner to read only Signature barcodes:</p>

<pre class="prettyprint"><code>&lt;META HTTP-Equiv="scanner" Content="allDecoders:disabled"&gt;
&lt;META HTTP-Equiv="scanner" Content="Signature:enabled"&gt;
&lt;META HTTP-Equiv="scanner" Content="barcodeDataFormat:binary;dataBufferSize:5000"&gt;
&lt;META HTTP-Equiv="scanner" Content="enabled"&gt;
</code></pre>

<h2 id="rubyexamples" class="anchor"><a class="heading-anchor" href="#rubyexamples"><span></span></a>Ruby Examples</h2>

<p>The following example displays the signature panel with the default values:</p>

<pre class="prettyprint"><code>def display
    SignatureCapture.visibility = 'visible'
end
</code></pre>

<p>To call the this function from HTML, use the following code: </p>

<pre class="prettyprint"><code>&lt;li onclick="display();"&gt;Display signature panel&lt;/li&gt;
</code></pre>

<p>Where 'display()' is a JavaScript function which looks like: </p>

<pre class="prettyprint"><code>function display() {
    $.get('/app/SignatureCapture/display', { });
    return false;
}
</code></pre>

<p>The following example displays the signature panel at the bottom of the screen with a pen color and a background color, attaches a signature save event to save the signature event. This function can be called from HTML in a similar fashion to the one described above.</p>

<pre class="prettyprint"><code>def displayWithParams

    #Get the width
    width = System::get_property('screen_width')
    #and the height of the screen
    height = System::get_property('screen_height')

    SignatureCapture.width=width
    SignatureCapture.height=120

    #Position the signature panel at the bottom of our page
    SignatureCapture.left=0
    SignatureCapture.top=(height-250)

    SignatureCapture.penWidth=2
    SignatureCapture.name='signPanel1'
    SignatureCapture.penColor="#000000"
    SignatureCapture.bgColor="#D4D2D2"
    SignatureCapture.visibility='visible'
    SignatureCapture.signatureSaveEvent = url_for(:action =&gt; :signatureSaveEventListener)
    #Remember to create the 'Signatures' folder under the root of the device before executing this function! 
    SignatureCapture.destination = "url('file://\\Signatures\\sig1.bmp')"    
end
</code></pre>

<p>The 'signatureSaveEventListener' is a function that looks like: </p>

<pre class="prettyprint"><code>def signatureSaveEventListener
    WebView.execute_js("setFieldValue('Signature saved under Signatures folder in root');")
end
</code></pre>

<p>And the 'setFieldValue' is a JavaScript function that sets the inner HTML of a div to the value received in the arguments. </p>

<p>The following function triggers a signature save and fires the 'signatureSaveEvent'. The signature is saved as a bitmap in the directory specified in the signature destination:</p>

<pre class="prettyprint"><code>def save
    SignatureCapture.capture
end
</code></pre>

<p>The following function clears the signature panel:</p>

<pre class="prettyprint"><code>def clear
    SignatureCapture.clear      
end
</code></pre>