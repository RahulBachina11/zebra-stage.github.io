
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Using Queries">
    <title>Using Queries - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
<script src="/js/jquery.js"></script></head><!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <p class="navbar-text">
                        </p>

                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/zdm/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/zdm/setup">
                                    Setup
                            </a>
                        </li>
                        <li>
                            <a href="/zdm/query">
                                    Query Device
                            </a>
                        </li>
                        <li>
                            <a href="/zdm/delegation">
                                    Delegate Access
                            </a>
                        </li>
                        <li>
                            <a href="/zdm/usage">
                                    Architecture
                            </a>
                        </li>
                        <li>
                            <a href="/zdm/faq">
                                    FAQ
                            </a>
                        </li>
                        <li>
                            <a href="/zdm/api">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="/zdm/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>Using Queries</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="using-queries" class="anchor"><a class="heading-anchor" href="#using-queries"><span></span></a>Using Queries</h1>
                                    <p>
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h4 id="underconstruction" class="anchor"><a class="heading-anchor" href="#underconstruction"><span></span></a><code>UndER CoNStrUcTion</code></h4>

<h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>From the Overview section of <a href="https://confluence.zebra.com/display/TUT/Zebra+device+manager+design#Zebradevicemanagerdesign-StepstocommunicatewithZDM">this Confluence page)</a>:</p>

<p>Zebra Device Manager is a service on all Zebra devices running Android 11 and later that's designed to take the place of Zebra Mobility Extensions, commonly known as MX. ZDM performs most of the same functions as MX, while offering these additional features and capabilities: </p>

<ul>
<li>It's independent of the underlying OS image; it can be upgraded without replacing the entire OS.</li>

<li>It can be downloaded, installed and maintained through Google Play. It's also available on the <a href="http://support.zebra.com">Zebra Support Portal</a>. </li>

<li>If set as the Device Owner, ZDM can control the Device Policy Manager and access all DPM features and capabilities. </li>
</ul>

<!-- Make TUT components independent of BSP as much as possible, either by implementing the dependent functionality within TUT component or use Android OS functions -->

<!-- Wherever the dependency is cannot be avoided, then have one component or few components across multiple functions which would bridge this gap. That way across TUT components we will have one interface to talk to BSP components thus limiting the dependency to one or very few components.  -->

<!-- Zebra device manager will be released with BSP but it can be upgradable with sideload option to support rapid development for new feature release. -->

<!-- Zebra device manager should be side loadable from Google play, Zebra Support central or some specific server-->

<!-- Zebra device manager can be device owner to control device policy manager features , Customer can use Zebra device manager without buying third part EMM support -->

<p>Zebra device manager should be able to configure Zebra devices for different types of features
Zebra device manager should be behave able to support different types of bar code scanning and call different types of APIs - standard Android API, Privileged APIs, Zebra values add APIs or DPC APIs 
Zebra device manager should be provide data security while device configuration 
Zebra device manager should support manage configuration support for individuals Applications</p>

<!-- 
Zebra Mobility Extensions, known most commonly as MX, is being replaced by Zebra Device Manager. However, ZDM will still be called MX. Not confusing at all. 
 -->

<p>ZDM exposes Content Provider Interface as Generic Query Interface.</p>

<p>Content provider URI's used by other application to query ZDM is treated as Query identifiers.</p>

<p>ZDM will read the URI and redirects the query call to <code>ZDMQueryInterface</code> implemented  classes. </p>

<p>Query interface is open for all the applications. //Need to check with Security team.</p>

<p><code>ZDMProviderConstants.java</code> is a contract class that provide details on URIs, Column Names and other info required to query ZDM.</p>

<p>Query result will be part of the column  <code>COLUMN_QUERY_RESULT</code></p>

<p>Apps calling for access to another app's interface(s) must be explicitly granted permission to do so by the initiating app. </p>

<p>When an app attempts to use an interface that the implementing app has chosen to protect using a Delegation Scope, the implementing app queries ZDM to determine whether the calling app has been granted, by the administrator, the Delegation Scope that the implementing app has decided should grant access to that interface. </p>

<p>Similar to using an "allowlist" or "whitelist" in MX/AccessMgr, the calling app would not really "know" that ZDM was involved, but should be designed to gracefully handle instances when the implementing app rejects the calling app's attempt to use a protected interface.</p>

<p>The exception is when the calling app accesses an interface indirectly, such as through an intent. As in the MX/AccessMgr model, the calling app must acquire a token, which in the new model comes from ZDM. The token is sent by the calling app via intent to the implementing app, which checks with ZDM to determine whether the token was issued to an app entitled to access the protected API. See the <a href="../delegation">Delegation Scopes Usage Guide</a> for more information. </p>

<p>When a given function supported by ZDM  or ZVA is controlled by a Delegation Scope, then it  will only allow DIRECT use of that function by genuine instance of an application that has been explicitly granted that Delegation Scope.</p>

<p>When a genuine instance of an application is allowed DIRECT use of function supported that is controlled by a Delegation Scope, then that application MAY choose to allow INDIRECT use that function by another application, though some defined interface (e.g. AIDL, JavaScript callback, etc.). In such cases, the application that is allowed to use the function, it becomes responsible for ensuring that any use of that by another application is appropriately controlled.</p>

<hr>

<h2 id="communicatingwithzdm" class="anchor"><a class="heading-anchor" href="#communicatingwithzdm"><span></span></a>Communicating with ZDM</h2>

<p>Info in the section below is from <a href="https://confluence.zebra.com/display/TUT/Zebra+device+manager+design#Zebradevicemanagerdesign-StepstocommunicatewithZDM">this Confluence page)</a></p>

<ol>
<li><p>Calling app must bind with the ZDM service: </p>

<pre class="prettyprint"><code>
private static final String ZDM_PACKAGE "com.zebra.devicemanager"; 
private static final String ZDM_SERVICE_CLASS = "com.zebra.devicemanager.ZebraDeviceMgr"; 

Intent bindZDMServiceIntent = new Intent(); 
bindZDMServiceIntent.setComponent(new     ComponentName(ZDM_PACKAGE,ZDM_SERVICE_CLASS)); 
try {  bindService(bindZDMServiceIntent,ZDMServiceConnection,Context.BIND_AUTO_CREATE); 
}catch (SecurityException e){ 

} 

Messenger mService; 

private ServiceConnection ZDMServiceConnection = new ServiceConnection() { 
  @Override 
  public void onServiceConnected(ComponentName name, IBinder service) { 
            mService = new Messenger(service); 

<pre><code>     } 
</code></pre>

} 
</code></pre></li>

<li><p>Calling app send message(s) to ZDM for processing: </p>

<pre class="prettyprint"><code>
Message msg = Message.obtain(); 

IncomingHandler incomingHandler = new IncomingHandler(); 
msg.replyTo = new Messenger(incomingHandler); 
Bundle bundle = new Bundle(); 
bundle.putString("data",”JS function/js file path in device”); 
msg.setData(bundle); 
mService.send(msg); 
</code></pre></li>

<li><p>Calling app implements IncomingHandler to receive the response from ZDM: </p>

<pre class="prettyprint"><code>
public static final int TASK_COMPLETED = 5; 
public static final int TASK_FAILED = 6; 

private class IncomingHandler extends Handler { 
    @Override 
    public void handleMessage(Message msg) { 

<pre><code>    String response =   msg.getData().getString(Constant.RESPONSE); 
</code></pre>

//Parse the json to get all the details 

//Response json format mentioned below in the docs     
        } 
} 
</code></pre></li>

<li><p>Prepare app for responses coming in JsonString format, as below:  </p>

<pre class="prettyprint"><code>
{ 

  "status": "completed or IN_PROGRESS", 

  "msg": "task completed or task in progress", 

  "result": "[{\"command\":\"js callback name\",\"message\":\"detail about execution\",\"status\":\"SUCCESS or ERROR or EXCEPTION or IN_PROGRESS\"}]" 

} 
</code></pre></li>

<li><p>Parse responses:</p>

<pre class="prettyprint"><code>
JSONObject resObj = new JSONObject(response.trim()); 
String status = resObj.getString(STATUS); 
String message = resObj.getString(MSG); 
String result = resObj.getString(RESULT); 
JSONArray jsonArray = new JSONArray(result); 

for (int i = 0 ; i&lt;jsonArray.length();i++){ 
    JSONObject obj = jsonArray.getJSONObject(i); 
    Log.i(TAG,"callback result = "+obj.toString()); 
} 
</code></pre></li>
</ol>

<hr>

<h3 id="callerapps" class="anchor"><a class="heading-anchor" href="#callerapps"><span></span></a>Caller Apps</h3>

<p>Apps that call for access to protected interfaces of other apps must contain the following lines in their <code>manifest.xml</code> file:  </p>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.zebra.devicemanager.provider.READ_PERMISSION"/&gt;

&lt;uses-permission android:name="com.zebra.devicemanager.provider.WRITE_PERMISSION"/&gt;
</code></pre>

<p>For Android 11 or later, the tag below also is required to specify the package name of the Content Provider (<code>is the content provider the same as the "initiating app"?</code>):</p>

<pre class="prettyprint"><code>
&lt;queries&gt;
       &lt;package android:name="com.zebra.devicemanager" /&gt;
&lt;/queries&gt;
</code></pre>

<h3 id="useoftokens" class="anchor"><a class="heading-anchor" href="#useoftokens"><span></span></a>Use of Tokens</h3>

<p>Use one or more of the URIs in the table below to work with tokens. </p>

<table class="faceliftCenter" style="width:100%" border="1" padding="5px">
<tbody>
  <tr bgcolor="#dce8ef">
    <th>Action</th>
    <th>URI</th>
  </tr>

<tr>
  <td></td>
  <td><code>public static final String AUTHORITY = "com.zebra.devicemanager.zdmcontentprovider";</code></td>
</tr>

<tr>
  <td>Gain authorization to access to an app's (published) interfaces</td>
  <td><code>public static final Uri AUTHORITY_URI = Uri.parse("content://" + AUTHORITY);</code></td>
</tr>

<tr>
  <td>Acquire a token for access to an app's (published) interfaces</td>
  <td><code>public static final Uri ACQUIRE_TOKEN_URI = Uri.withAppendedPath(AUTHORITY_URI, "AcquireToken");</code></td>
</tr>

<tr>
  <td>Verify that a token is acquired and valid</td>
  <td><code>public static final Uri VERIFY_TOKEN_URI = Uri.withAppendedPath(AUTHORITY_URI, "VerifyToken");</code></td>
</tr>

<tr>
  <td>Verify that permission is granted to acquire token</td>
  <td><code>public static final Uri VERIFY_PERMISSION_URI = Uri.withAppendedPath(AUTHORITY_URI, "VerifyAppPermission");</code></td>
</tr>

<tr>
  <td>Delegate content to be published</td>
  <td><code>public static final Uri DELEGATION_CONTENT_URI = Uri.withAppendedPath(AUTHORITY_URI, "Delegation");</code></td>
</tr>

<tr>
  <td>Access Android System settings interfaces</td>
  <td><code>public static final Uri SYSTEM_SETTINGS_UI_URI = Uri.withAppendedPath(AUTHORITY_URI, "SystemSettingsUI");</code></td>
</tr>

<tr>
  <td><code>NEED DEFINITION</code></td>
  <td><code>public static final String COLUMN_SIGNATURE = "signature";</code></td>
</tr>

<tr>
  <td><code>NEED DEFINITION</code></td>
  <td><code>public static final String COLUMN_PACKAGE_NAME = "package_name";</code></td>
</tr>

<tr>
  <td><code>NEED DEFINITION</code></td>
  <td><code>public static final String COLUMN_QUERY_RESULT = "query_result";</code></td>
</tr>

<tr>
  <td><code>NEED DEFINITION</code></td>
  <td><code>public static final String COLUMN_DELEGATION_SCOPE = "delegation_Scope";</code></td>
</tr>

<tr>
  <td><code>NEED DEFINITION</code></td>
  <td><code>public static final String COLUMN_TOKEN = "token";</code></td>
</tr>

</tbody></table>

<hr>

<h2 id="samplecode" class="anchor"><a class="heading-anchor" href="#samplecode"><span></span></a>Sample Code</h2>

<p>The following code snippets illustrate how to use the URIs programmatically to achieve the desired result.</p>

<h3 id="delegationquery" class="anchor"><a class="heading-anchor" href="#delegationquery"><span></span></a>Delegation Query</h3>

<p><strong>This query determines whether the app has been granted the specified Delegation Scope</strong>. Use this code to verify that the calling app is bound to a service. The service must share the caller details, such as caller package name and signature, and the delegation scope defined by it. </p>

<h4 id="resultcodes" class="anchor"><a class="heading-anchor" href="#resultcodes"><span></span></a>Result Codes</h4>

<ul>
<li><strong>TRUE</strong> - The given caller is assigned the given Delegation Scope; the specified app is permitted to call the service**</li>

<li>FALSE -  Caller is <strong>NOT</strong> assigned the Delegation Scope specified in the query</li>
</ul>

<h4 id="example" class="anchor"><a class="heading-anchor" href="#example"><span></span></a>Example</h4>

<pre class="prettyprint"><code>
val cursor: Cursor = appContext.contentResolver.query(DELEGATION_CONTENT_URI, null,
        COLUMN_PACKAGE_NAME + "=? AND " + COLUMN_SIGNATURE + "=? AND " + COLUMN_DELIGATION_SCOPE + "=?",
        arrayOf("com.example.application", "hfoahdsohsgjhsjv=", "delegation-zebra-datawedge-intent-api"), null)!!

if (cursor != null &amp;&amp; cursor.count &gt; 0) {
    cursor.moveToFirst()
     val result = cursor.getString(cursor.getColumnIndex(COLUMN_QUERY_RESULT)))
}
</code></pre>

<hr>

<h3 id="verifytoken" class="anchor"><a class="heading-anchor" href="#verifytoken"><span></span></a>Verify Token</h3>

<p><strong>This code confirms that a token allows calls to a specified service</strong>. For example, a receiver of an intent can verify whether the token sent by the caller app is valid. Since the intent receiver knows the Delegation Scope protects that operation, it must send both the token <em>and</em> the associated Delegation Scope.</p>

<h4 id="resultcodes-1" class="anchor"><a class="heading-anchor" href="#resultcodes-1"><span></span></a>Result Codes</h4>

<ul>
<li><strong>TRUE</strong> - the received token is valid for the given Delegation Scope</li>

<li>FALSE  - the received token is <strong>NOT</strong> valid for the given Delegation Scope</li>

<li>TokenExpiredException - The token is expired</li>
</ul>

<h4 id="example-1" class="anchor"><a class="heading-anchor" href="#example-1"><span></span></a>Example</h4>

<pre class="prettyprint"><code>
val cursor: Cursor = appContext.contentResolver.query(VERIFY_TOKEN_URI, null, COLUMN_TOKEN + "=? AND " + COLUMN_DELIGATION_SCOPE + "=?", arrayOf("34uuuuuojsnushnjd232434snmnsdms23434", "delegation-zebra-datawedge-intent-api"), null)!!

if (cursor != null &amp;&amp; cursor.count &gt; 0) {
    cursor.moveToFirst()
    result = cursor.getString(cursor.getColumnIndex(COLUMN_QUERY_RESULT)))
}
</code></pre>

<blockquote>
  <p><code>PLEASE EXPLAIN NOTE BELOW</code></p>
</blockquote>

<p>An application who wants to query ZDM eg: receiver of the intent could CHOOSE to pass that package name and signature to the ZDM query, along with the mandatory token and delegation scope.  But it should only do that if it wants that verification done. </p>

<pre class="prettyprint"><code>
val cursor: Cursor = appContext.contentResolver.query(VERIFY_TOKEN_URI, null, COLUMN_TOKEN + "=? AND " + COLUMN_DELIGATION_SCOPE + "=?" + COLUMN_PACKAGE_NAME + "=?" + COLUMN_SIGNATURE + "=?", arrayOf("34uuuuuojsnushnjd232434snmnsdms23434", "delegation-zebra-datawedge-intent-api", "com.example.app1", "dyghfjbcdh8=wjsmndhsjenfbaueyruefut"), null)!!

if (cursor != null &amp;&amp; cursor.count &gt; 0) {
    cursor.moveToFirst()
    result = cursor.getString(cursor.getColumnIndex(COLUMN_QUERY_RESULT)))
}
</code></pre>

<!-- rewording of the above. An app attempting to query ZDM could--as the receiver of the intent-- ***choose*** to pass that package name and signature to the ZDM query along with the mandatory token and Delegation Scope. But it should do that only if the verification is required. 
 -->

<hr>

<h3 id="acquiretoken" class="anchor"><a class="heading-anchor" href="#acquiretoken"><span></span></a>Acquire Token</h3>

<p>An application that requires a token to call the other app can obtain it via the ZDM Content Provider.
The caller app must send the Delegation Scope name as defined by the target (<code>initiating?</code>) app as part of the column value. </p>

<p>If the caller app is granted the same Delegation Scope (<code>TRUE</code>?), ZDM generates and returns a token valid for 24 hours.</p>

<p>throws SecurityException if caller is not delegated to get the token.</p>

<h4 id="resultcodes-2" class="anchor"><a class="heading-anchor" href="#resultcodes-2"><span></span></a>Result Codes</h4>

<ul>
<li><strong>TRUE</strong> - caller app granted Delegation Scope and token valid for 24 hours</li>

<li>SecurityException - the caller is not authorized to receive the token</li>
</ul>

<h4 id="example-2" class="anchor"><a class="heading-anchor" href="#example-2"><span></span></a>Example</h4>

<pre class="prettyprint"><code>
val cursor: Cursor = appContext.contentResolver.query(ACQUIRE_TOKEN_URI, null,
        COLUMN_DELIGATION_SCOPE + "=?", arrayOf("delegation-zebra-datawedge-api-access-query"), null)!!
if (cursor != null &amp;&amp; cursor.count &gt; 0) {
    cursor.moveToFirst()
    result = cursor.getString(cursor.getColumnIndex(COLUMN_QUERY_RESULT)))
}
</code></pre>

<hr>

<h3 id="verifyapppermission" class="anchor"><a class="heading-anchor" href="#verifyapppermission"><span></span></a>Verify App Permission</h3>

<p>Verifies whether authority is granted to an app for accessing a token. </p>

<h4 id="resultcodes-3" class="anchor"><a class="heading-anchor" href="#resultcodes-3"><span></span></a>Result Codes</h4>

<ul>
<li><strong>TRUE</strong> - app is authorized to request a token</li>

<li>FALSE - app is NOT authorized to request a token; token requests will be denied</li>
</ul>

<h4 id="example-3" class="anchor"><a class="heading-anchor" href="#example-3"><span></span></a>Example</h4>

<pre class="prettyprint"><code>
val cursor: Cursor = appContext.contentResolver.query(VERIFY_PERMISSION_URI,  null, COLUMN_PACKAGE_NAME + "=? AND " + COLUMN_PERMISSION + "=?",
arrayOf("com.example.application", "android.permission.PACKAGE_USAGE_STATS"), null)!!

if (cursor != null &amp;&amp; cursor.count &gt; 0) {
   cursor.moveToFirst()
   result = cursor.getString(cursor.getColumnIndex(COLUMN_QUERY_RESULT)))
}
</code></pre>

<h3 id="querysystemsettinguistatus" class="anchor"><a class="heading-anchor" href="#querysystemsettinguistatus"><span></span></a>Query System Setting UI status</h3>

<p>Queries the current access to the Android Settings panel UI for the device user.</p>

<h4 id="resultcodes-4" class="anchor"><a class="heading-anchor" href="#resultcodes-4"><span></span></a>Result Codes</h4>

<ul>
<li><strong>0</strong> - user has access to full Android Settings panel </li>

<li>1 - user has reduced access (<code>DEFINE 'REDUCED' ACCESS</code>) to the Android Settings panel </li>
</ul>

<h4 id="example-4" class="anchor"><a class="heading-anchor" href="#example-4"><span></span></a>Example</h4>

<pre class="prettyprint"><code>
val cursor: Cursor = appContext.contentResolver.query(SYSTEM_SETTINGS_UI_URI,  null,  null , null, null)!!

if (cursor != null &amp;&amp; cursor.count &gt; 0) {
    cursor.moveToFirst()
    result = cursor.getString(cursor.getColumnIndex(COLUMN_QUERY_RESULT)))
}
</code></pre>

<!-- ## Also See

* **For more information about ZWC setup, features and usage**, please refer to the following guides:
* **[Workstation Connect Administrator's Guide (pdf)](https://www.zebra.com/apps/dlmanager?dlp=-227178c9720c025483893483886ea540bd07dd0f9873752cf891686eb4950400add13410300d57bba85f97bf163f9fdfea3ed8bf485bd7a171c5a8061d1bce3aeaf983a14fd41a058107df057c3e5b0746caaf49c506ab4&c=us&l=en)** | Setting up users, installing/removing apps and shortcuts, configuring access to apps and USB-based storage
* **[Workstation Connect Installation Guide (pdf)](https://www.zebra.com/apps/dlmanager?dlp=-227178c9720c025483893483886ea540bd07dd0f9873752cf891686eb4950400add13410300d57bba85f97bf163f9fdfea3ed8bf485bd7a171c5a8061d1bce3aeaf983a14fd41a046c19712f82903d932d112803839fae3&c=us&l=en)** | Installing the ZWC solution manually, or using Zebra StageNow or an EMM system
* **[Workstation Connect User Guide (pdf)](https://www.zebra.com/apps/dlmanager?dlp=-227178c9720c025483893483886ea540bd07dd0f9873752cf891686eb4950400add13410300d57bba85f97bf163f9fdfea3ed8bf485bd7a171c5a8061d1bce3aeaf983a14fd41a0ce93cb5cf4286df532d112803839fae3&c=us&l=en)** | Desktop Mode set-up and usage

 --><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. ©2021 Zebra Technologies Corp. and/or its affiliates.<br> <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal.html">Legal</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms of Use</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/privacy-statement.html">Privacy Policy</a> 
                    </div>
                     <!--
                     <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&gid=3220074&trk=anet_ug_hm&goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div> -->
                 </div>
            </div>
        </footer>
    
    <!--/#footer 
        10/25/18 removed <footer id="footer" class="navbar-fixed-bottom">
    -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>